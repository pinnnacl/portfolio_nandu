<!doctype html>
<html class="no-js" lang="en">

<head>
    <!-- meta data -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->

    <!--font-family-->
    <link href="https://fonts.googleapis.com/css?family=Poppins:100,200,300,400,500,600,700,800,900&amp;subset=devanagari,latin-ext" rel="stylesheet">

    <!-- title of site -->
    <title>Nandu</title>

    <!-- For favicon png -->
    <link rel="shortcut icon" type="image/icon" href="assets/logo/favicon.png" />

    <!--font-awesome.min.css-->
    <link rel="stylesheet" href="assets/css/font-awesome.min.css">

    <!--flat icon css-->
    <link rel="stylesheet" href="assets/css/flaticon.css">

    <!--animate.css-->
    <link rel="stylesheet" href="assets/css/animate.css">

    <!--owl.carousel.css-->
    <link rel="stylesheet" href="assets/css/owl.carousel.min.css">
    <link rel="stylesheet" href="assets/css/owl.theme.default.min.css">

    <!--bootstrap.min.css-->
    <link rel="stylesheet" href="assets/css/bootstrap.min.css">

    <!-- bootsnav -->
    <link rel="stylesheet" href="assets/css/bootsnav.css">

    <!--style.css-->
    <link rel="stylesheet" href="assets/css/style.css">

    <!--responsive.css-->
    <link rel="stylesheet" href="assets/css/responsive.css">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->

    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
        <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    <style>
        body {
            font-family: 'Poppins', sans-serif;
            line-height: 1.6;
            color: #333;
            margin: 0;
            padding: 0;
        }

        .project-container {
            max-width: 1300px;
            margin: 130px 40px;
            padding: 0 20px;
        }

        h1 {
            color: #333;
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        h2 {
            color: #555;
            font-size: 2em;
            margin-top: 20px;
        }

        h3 {
            color: #555;
            font-size: 1.6em;
            margin-top: 20px;
        }

        p {
            color: #666;
            font-size: 1.1em;
            margin-bottom: 20px;
        }

        .project-header {
            border-bottom: 2px solid #e2e2e2;
            padding-bottom: 10px;
            margin-bottom: 20px;
        }

        .project-details {
            margin-bottom: 40px;
        }

        .project-description {
            margin-bottom: 20px;
        }

        .code-container {
    background-color: white;
    border-radius: 5px;
    padding: 20px;
    width: fit-content;
    margin-left: auto;
    margin-right: auto;
    justify-content: center;
    align-items: center;
    
}

pre {
    margin: 0;
    font-size: 14px;
    line-height: 1.1;
    overflow: auto;
    text-align: left;
}

code {
    font-family: Consolas, 'Courier New', monospace;
    color: #333;
    display: block;
}




    </style>

</head>

<body>
    <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
    <![endif]-->

    <!-- top-area Start -->
    <header class="top-area">
        <div class="header-area">
            <!-- Start Navigation -->
            <nav class="navbar navbar-default bootsnav navbar-fixed dark no-background">

                <div class="container">

                    <!-- Start Header Navigation -->
                    <div class="navbar-header">
                        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-menu">
                            <i class="fa fa-bars"></i>
                        </button>
                        <a class="navbar-brand" href="index.html">Nandu</a>
                    </div>
                    <!--/.navbar-header-->
                    <!-- End Header Navigation -->

                    <!-- Collect the nav links, forms, and other content for toggling -->
                    <div class="collapse navbar-collapse menu-ui-design" id="navbar-menu">
                        <ul class="nav navbar-nav navbar-right" data-in="fadeInDown" data-out="fadeOutUp">
                            <li class=" smooth-menu active"></li>
                            <li class=" smooth-menu"><a href="index.html#education">education</a></li>
                            <li class="smooth-menu"><a href="index.html#skills">skills</a></li>
                            <li class="smooth-menu"><a href="index.html#experience">experience</a></li>
                            <li class="smooth-menu"><a href="index.html#profiles">profile</a></li>
                            <li class="smooth-menu"><a href="index.html#projects">projects</a></li>
                            <li class="smooth-menu"><a href="index.html#Blog">Blog</a></li>
                            <li class="smooth-menu"><a href="index.html#contact">contact</a></li>
                        </ul>
                        <!--/.nav -->
                    </div>
                    <!-- /.navbar-collapse -->
                </div>
                <!--/.container-->
            </nav>
            <!--/nav-->
            <!-- End Navigation -->
        </div>
        <!--/.header-area-->

        <div class="clearfix"></div>

    </header>
    <!-- /.top-area-->

    <section id="project">
        <div class="project-container">
            <div class="project-header">
                <h1>VProfile</h1>
            </div>
            <div class="project-details">
                <h2>Project Overview</h2><br>
                <p>When a developer pushes updated code to the Git master branch, the CI/CD pipeline automatically initiates the following processes: code checkout, compilation, testing, packaging, and containerization. The code undergoes testing with SonarQube, where a quality gate is configured with a bug threshold of 60. If the application does not pass this quality gate, the issue is flagged and communicated back to the developer. Once the application successfully passes all tests, it is containerized using Docker and pushed to Amazon ECR (Elastic Container Registry). From there, it is deployed to Amazon ECS (Elastic Container Service) for production use.</p>
				
				<p>The company’s goal is to deliver product updates frequently to production automatically with high quality and reliability. They also aim to accelerate software delivery speed, enhance quality, and reduce feedback time between developers and testers.</p>
            </div>
            <div class="project-description">
                <h2>Technologies Used</h2><br>
				<ul style="margin-left: 80px;">
                    <li>Git - For version control for tracking changes in the code files</li>
                    <li>Maven – For Continuous Build </li>
                    <li>Jenkins - For continuous integration and continuous deployment </li>
					<li>Slack - Notification </li>
					<li>SonarQube - Configuration management tools </li>
					<li>ECR - for uploading docker image</li>
                    <li>ECS - for deploying task/container</li>
                </ul>
            </div>
            <div class="project-description">
                <h2>My Role</h2><br>
                <img src="assets/images/project/img_p3_6.jpg" alt="Project Image" style="display: block; margin: 0 auto;"><br><br>
                <p>Create an EC2 instance with below properties<br><br>
                    <strong>Jenkins</strong> t2.medium | 8Gb RAM | Ubuntu 22.04 LTS<br>
                    <strong>SonarQube</strong> t2.medium | 8Gb RAM  | Ubuntu 22.04 LTS<br>
                <h3>Setup Jenkins server</h3><br>
                <p>Install Java as a dependency<br>Visit <a href="https://www.jenkins.io/doc" target="_blank" style="color: #ff5733; font-weight: bold; text-decoration: none; background-color: #e0e0e0; padding: 5px 10px; border-radius: 5px;">www.jenkins.io</a> to install Jenkins<br></p>
            </div>
            <div class="code-container">
                <pre><code>
  sudo apt update

  sudo apt install openjdk-17-jre -y
                    
  sudo wget -O /usr/share/keyrings/jenkins-keyring.asc \
  https://pkg.jenkins.io/debian-stable/jenkins.io-2023.key
                    
  echo "deb [signed-by=/usr/share/keyrings/jenkins-keyring.asc]" \
  https://pkg.jenkins.io/debian-stable binary/ | sudo tee \
  /etc/apt/sources.list.d/jenkins.list > /dev/null
    
  sudo apt-get update
                    
  sudo apt-get install jenkins -y
                </code></pre>
            </div>
            <div class="project-description"></div>
            <img src="assets/images/project/img_p2_1.jpg" alt="Project Image" style="display: block; margin: auto;">
<br>
            <p>install git, maven & docker</p>
            <div class="code-container">
                <pre><code>
  sudo apt install git

  sudo apt install maven -y
                    
  sudo apt install docker.io -y

  sudo usermod -aG docker jenkins  #restart Jenkins
                </code></pre>
            </div>

            <h3>Create IAM User</h3><br><br>
            Create IAM user with below permission and then generate access key<br><br>
                <ul style="margin-left: 80px;">
                    <li><u>AmazonEC2ContainerRegistryFullAccess</u></li>   
                    <li><u>AmazonECS_FullAccess</u></li>
                </ul><br>
            <img src="assets/images/project/img_p3_1.jpg" alt="Project Image" style="display: block; margin: auto;">
            <br><h3>Create ECR private repository</h3><br>
            Navigate to AWS Management consol, search for "ECR". Click on create repository.<br><br>
            <img src="assets/images/project/img_p3_2.jpg" alt="Project Image" style="display: block; margin: auto;"><br><br>

            <h3>Create Jenkins Pipeline</h3><br><br>
            <strong>Install below Jenkins plugins:</strong>
            <ul style="margin-left: 80px;">
                <li>Docker pipline</li>   
                <li>Amazone ECR</li>
                <li>Amazone Web Service SDK :: ALL</li>
            </ul><br><br>
            <img src="assets/images/project/img_p3_3.jpg" alt="Project Image" style="display: block; margin: auto;"><br><br><br><br>
            Add aws credential on Jenkins<br><br>
            Dashboard --> Manage Jenkins --> Credentials --> System --> Global credentials (unrestricted)<br><br><br><br>
            <img src="assets/images/project/img_p3_4.jpg" alt="Project Image" style="display: block; margin: auto;"><br><br><br><br>

            Write Jenkins pipeline as shown below:<br><br><br><br>
            <div class="code-container">
                <pre><code>
pipeline {
    agent any
    tools {
        maven "MAVEN3"
    }
                                        
    environment {
        registryCredential = 'ecr:us-east-1:aws_cred'
        appRegistry = "381492291062.dkr.ecr.us-east-1.amazonaws.com/vprofile_docker"
        vprofileRegistry = "https://381492291062.dkr.ecr.us-east-1.amazonaws.com"
    }
    stages {
        stage('Fetch code'){
            steps {
                git branch: 'docker', url: 'https://github.com/devopshydclub/vprofile-project.git'
            }
        }
                                        
        stage('Test'){
            steps {
                sh 'mvn test'
            }
        }
                                        
        stage ('CODE ANALYSIS WITH CHECKSTYLE'){
            steps {
                sh 'mvn checkstyle:checkstyle'
            }
            post {
                success {
                    echo 'Generated Analysis Result'
                }
            }
        }
                                               
        stage('Build App Image') {
            steps {                                
                script {
                    dockerImage = docker.build( appRegistry + ":$BUILD_NUMBER", "./Docker-files/app/multistage/")
                }                          
            }                                
        }
                                        
        stage('Upload App Image') {
            steps{
                script {
                    docker.withRegistry( vprofileRegistry, registryCredential ) {
                    dockerImage.push("$BUILD_NUMBER")
                    dockerImage.push('latest')
                    }
                }
            }
        }
    }
}
                </code></pre>
            </div><br><br><br><br>
            <img src="assets/images/project/img_p3_5.jpg" alt="Project Image" style="display: block; margin: auto;"><br><br><br><br>
            <h3>Create ECS Cluster, task definition  and ECS service</h3><br>
            <strong>Creat cluster:</strong><br>
            <ul style="margin-left: 80px;">
                <li>Cluster name: vprofile_project<br></li>
                <li>Monitoring – optional: Use container insights  (ECS – cloudwatch)</li>
            </ul><br><br><br>
            <img src="assets/images/project/img_p3_7.jpg" alt="Project Image" style="display: block; margin: auto;"><br><br><br><br>
            <strong>Task definition: make the below changes</strong><br>
            <ul style="margin-left: 80px;">
                <li>name: vprofileapptask<br></li>
                <li>memmory 2GB</li>
                <li><strong> Container – 1</strong></li>
                <li>Name: vproapp<br></li>
                <li>Name: vproapp</li>
                <li>port 8080 (tomcat)</li>
                <li>tag: Name  vprofileapptask</li>
            </ul><br><br><br>

            <img src="assets/images/project/img_p3_8.jpg" alt="Project Image" style="display: block; margin: auto;"><br><br><br><br><br><br><br>
            <strong>Create a Role with "CloudwatchLogsfullaccess" previllags:</strong><br><br>
            task defention --> Task execution role --> ecsTaskExecutionRole --> add permission --> attach policies --> CloudwatchLogsfullaccess<br><br><br><br>
            <img src="assets/images/project/img_p3_9.jpg" alt="Project Image" style="display: block; margin: auto;"><br><br><br><br>
            <strong>Create Service</strong><br><br>
            <ul style="margin-left: 80px;">
                <li>Application type: Service(tomcat running on background)<br></li>
                <li>family – vprofileapptask</li>
                <li>service name: vprofileappsvc<br></li>
                <li>service name: vprofileappsvc</li>
                <li>Deployment failiure detection – uncheck</li>
                <li><strong> Networking</strong></li>
                <li>Create a new security group</li>
                <li>http:80 0.0.0.0/0, ::0</li>
                <li>custom port:8080  0.0.0.0/0, ::0</li>
                <li><strong>Load Balancer</strong></li>
                <li>type: application load Balancer</li>
                <li>name: vproappelbecs</li>
                <li>container to LB 8080 : 8080</li>
                <li>listner 80</li>
                <li>target group name: vproecstg</li>
                <li>helthcheck: /login (vprofile app is available in this path)</li>
            </ul><br><br><br>
            <img src="assets/images/project/img_p3_10.jpg" alt="Project Image" style="display: block; margin: auto;"><br><br><br><br>
            <img src="assets/images/project/img_p3_11.jpg" alt="Project Image" style="display: block; margin: auto;"><br><br><br><br>
            <img src="assets/images/project/img_p3_12.jpg" alt="Project Image" style="display: block; margin: auto;"><br><br><br><br>
            It will take 5 to 10mins to deploy the task<br><br>
            Cluster --> Tasks<br><br> 
            To check Logs : Cluster --> Logs<br>
            To get the DNS endpoint: Amazon Elastic Container Service --> Clusters --> vprofile_project --> Services --> vprofileappsvc --> Configuration<br><br><br><br>
            <img src="assets/images/project/img_p3_13.jpg" alt="Project Image" style="display: block; margin: auto;"><br><br><br><br>

            <h3>Write pipeline script to deploy image on ECS</h3><br>
            <div class="code-container">
                <pre><code>
environment {
    registryCredential = 'ecr:us-east-2:awscreds'
    appRegistry = "951401132355.dkr.ecr.us-east-2.amazonaws.com/vprofileappimg"
    vprofileRegistry = "https://951401132355.dkr.ecr.us-east-2.amazonaws.com"
    cluster = "vprofile"
    service = "vprofileappsvc"
}


stage('Deploy to ecs') {
    steps {
        withAWS(credentials: 'awscreds', region: 'us-east-2') {
        sh 'aws ecs update-service --cluster ${cluster} --service ${service} --force-new-deployment'
        }
    }
}
</code></pre>
</div><br><br><br><br>
        </p>    
    </div>






    <!-- Footer -->
<footer style="background-color: #333; color: #fff; padding: 20px 0; text-align: center;">
    <div class="container">
        <div class="row">
            <div class="col-md-6">
                <p>&copy; 2024 Nandu. All rights reserved.</p>
            </div>
            <div class="col-md-6">
                <ul style="list-style: none; padding: 0; margin: 0;">
                    <li style="display: inline; margin: 0 10px;"><a href="mailto:info@example.com" style="color: #fff; text-decoration: none;">Contact</a></li>
                    <li style="display: inline; margin: 0 10px;"><a href="privacy-policy.html" style="color: #fff; text-decoration: none;">Privacy Policy</a></li>
                    <li style="display: inline; margin: 0 10px;"><a href="terms-of-service.html" style="color: #fff; text-decoration: none;">Terms of Service</a></li>
                </ul>
            </div>
        </div>
        <div class="social-media" style="margin-top: 10px;">
            <a href="https://facebook.com" target="_blank" style="color: #fff; margin: 0 5px;"><i class="fa fa-facebook"></i></a>
            <a href="https://twitter.com" target="_blank" style="color: #fff; margin: 0 5px;"><i class="fa fa-twitter"></i></a>
            <a href="https://linkedin.com" target="_blank" style="color: #fff; margin: 0 5px;"><i class="fa fa-linkedin"></i></a>
            <a href="https://github.com" target="_blank" style="color: #fff; margin: 0 5px;"><i class="fa fa-github"></i></a>
        </div>
    </div>
</footer>
<!-- End Footer -->

<!-- Include Font Awesome for social media icons -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/js/all.min.js"></script>
